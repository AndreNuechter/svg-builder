!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return i})),n.d(t,"f",(function(){return s})),n.d(t,"i",(function(){return u})),n.d(t,"g",(function(){return l})),n.d(t,"h",(function(){return d})),n.d(t,"j",(function(){return f})),n.d(t,"k",(function(){return y})),n.d(t,"l",(function(){return m})),n.d(t,"m",(function(){return x})),n.d(t,"n",(function(){return b})),n.d(t,"o",(function(){return g})),n.d(t,"q",(function(){return p})),n.d(t,"p",(function(){return h})),n.d(t,"r",(function(){return v}));const r=document.getElementById("arc-cmd-config"),o=document.getElementsByClassName("control-point"),c=document.getElementById("control-point-container"),a=document.getElementById("download-btn"),i=document.getElementById("drawing-content"),s=document.getElementById("fill-and-stroke"),u=i.children,l=document.getElementById("layer-select"),d=document.getElementsByName("layer-selector"),f=document.getElementById("output-configuration"),m=document.getElementById("preview"),y=document.getElementById("close-path-toggle"),g=document.getElementById("canvas"),h=document.getElementById("transformations"),p=h.elements,b=p.scale.getElementsByTagName("input"),x=p.rotate.getElementsByTagName("input"),[v]=document.getElementsByName("transform-layer-only")},function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return f})),n.d(t,"b",(function(){return d})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return y})),n.d(t,"f",(function(){return g})),n.d(t,"g",(function(){return h})),n.d(t,"h",(function(){return p})),n.d(t,"i",(function(){return b})),n.d(t,"j",(function(){return x})),n.d(t,"k",(function(){return v})),n.d(t,"l",(function(){return O})),n.d(t,"m",(function(){return j})),n.d(t,"n",(function(){return w}));var r=n(3),o=n(0),c=n(2);const a=["checked","textContent","data","onpointerdown","onpointerup"],{elements:i}=o.f,{elements:s}=o.j,u=(e,t)=>{Object.entries(t).forEach(([t,n])=>{const r=e[t];"SELECT"===r.tagName?[...r.children].forEach(e=>{e.selected=e.value===n}):r.value=n})};function l(e,t){const n=w(e.transforms),r=[o.e,o.b],c=[n];if(o.i[t.layer]){const e=w(t.current.transforms);r.push(o.i[t.layer]),c.push(n+e,e)}else c.push(n);r.forEach((e,t)=>e.setAttribute("transform",c[t]))}function d(e){return t=>f(e.cloneNode(!1),t)}function f(e,t){return Object.keys(t).forEach(n=>{a.includes(n)?e[n]=t[n]:e.setAttribute(n,t[n])}),e}function m(e,t){return n=>{const[r,o]=h(n);f(e,t(r,o))}}function y(e){return e.slice().reverse().find(e=>"A"===e.cmd)}function g(e){return[...i].filter(t=>t.hasAttribute("name")&&t.closest("label").classList.contains(`for-${e}`)).reduce((e,t)=>Object.assign(e,{[t.name]:t.value}),{})}function h({x:e,y:t}){let n=o.o.createSVGPoint();return Object.assign(n,{x:e,y:t}),n=n.matrixTransform(o.o.children[1].getScreenCTM().inverse()),[n.x,n.y]}function p(e){return e.cmd+r.c[e.cmd](e).join(" ")}function b(e){return JSON.parse(JSON.stringify(e))}function x(e,t){const n=e.current?y(e.current.points)||{...t.arcCmdConfig,...e.arcCmdConfig}:t.arcCmdConfig;Object.assign(e.arcCmdConfig,n),Object.entries(n).filter(([e])=>!["cmd","x","y"].includes(e)).forEach(([e,t])=>{const n=o.a.elements[e];n["checkbox"===n.type?"checked":"value"]=t})}function v(e){u(i,e)}function O({outputConfig:e}){u(s,e)}function j(e){Object.entries(e).filter(([e])=>"translate"!==e).forEach(([e,t])=>{c.b[e]?t.forEach((t,n)=>{c.b[e][n].value=t}):o.q[e].value=t})}function w(e){return Object.entries(e).reduce((e,[t,n])=>`${e}${t}(${"object"==typeof n?n.filter(e=>""!==e):n})`,"")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return l}));var r=n(0),o=n(3);const c=Object.keys(o.c),a={scale:r.n,rotate:r.m},i={mode:"path",closePath:!1,outputConfig:{width:320,height:180,"vb-min-x":0,"vb-min-y":0,"vb-width":0,"vb-height":0,ratio:"xMidYMid","slice-or-meet":"meet","file-format":"svg"},transforms:{translate:[0,0],scale:[1,1],rotate:[0,0,0],skewX:0,skewY:0},style:{stroke:"#000","stroke-opacity":1,"stroke-width":2,fill:"none","fill-opacity":1},arcCmdConfig:{xR:50,yR:50,xRot:0,large:!1,sweep:!1}},s=e=>e+1,u=e=>e-1,l={ArrowUp:{prop:1,cb:u},ArrowDown:{prop:1,cb:s},ArrowLeft:{prop:0,cb:u},ArrowRight:{prop:0,cb:s}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return s}));const r={H:({x:e})=>[e],V:({y:e})=>[e],Q:e=>[e.x1,e.y1,e.x,e.y],C:e=>[e.x1,e.y1,e.x2,e.y2,e.x,e.y],A:e=>[e.xR,e.yR,e.xRot,e.large,e.sweep,e.x,e.y],S:e=>[e.x1,e.y1,e.x,e.y],T:({x:e,y:t})=>[e,t],M:({x:e,y:t})=>[e,t],L:({x:e,y:t})=>[e,t]},o=(e,t,n,r)=>e<t?n>r?-33:33:0,c=(e,t,n,r)=>{const c=Math.abs(n-e),a=Math.abs(r-t);return{xMin:Math.min(e,n),yMin:Math.min(t,r),yOffset:o(a,c,n,e),xOffset:o(c,a,r,t)}};function a(e){return{xR:e.xR,yR:e.yR,xRot:e.xRot,large:+e.large,sweep:+e.sweep}}function i(e,t,{x:n,y:r}){const{xMin:o,yMin:a,yOffset:i,xOffset:s}=c(e,t,n,r);return{x1:o-s+.25*(Math.max(e,n)-o),y1:a-i+.25*(Math.max(t,r)-a),x2:o-s+.75*(Math.max(e,n)-o),y2:a-i+.75*(Math.max(t,r)-a)}}function s(e,t,{x:n,y:r}){const{xMin:o,yMin:a,yOffset:i,xOffset:s}=c(e,t,n,r);return{x1:o-s+.5*(Math.max(e,n)-o),y1:a-i+.5*(Math.max(t,r)-a)}}},function(e,t,n){n(8),n(5),n(6),e.exports=n(7)},function(e,t,n){"use strict";n.r(t);var r=n(1),o=n(0);const c=document.getElementById("coords");o.o.addEventListener("pointermove",e=>{const[t,n]=Object(r.g)(e);c.textContent=`x: ${Math.trunc(t)}, y: ${Math.trunc(n)}`,c.style.left=`${e.pageX-120}px`,c.style.top=`${e.pageY-40}px`}),o.o.addEventListener("pointerleave",()=>{c.style=null})},function(e,t){(()=>{const e=({target:{parentElement:{classList:e}}})=>{e.toggle("open"),e.toggle("closed")};[...document.getElementsByClassName("togglable")].forEach(t=>{t.firstElementChild.onclick=e,t.classList.contains("open")||t.classList.contains("closed")||t.classList.add("open")})})()},function(e,t){(()=>{const e=window.location.hash.slice(1),{body:t}=document,n=document.getElementById("tabs"),r=[...n.children];window.addEventListener("DOMContentLoaded",()=>{const n=["drawing","output"],r=n.includes(e)?e:n[0];window.location.hash=r,t.dataset.activeTab=r,document.querySelector(`a[data-tab-name="${r}"]`).click()}),n.onclick=({target:e})=>{e.classList.contains("tab")&&(t.dataset.activeTab=e.dataset.tabName,r.forEach(e=>e.classList.remove("active")),e.classList.add("active"))}})()},function(e,t,n){"use strict";n.r(t);var r=n(2),o=n(0),c=n(1);const a={get viewBox(){return[this.outputConfig["vb-min-x"],this.outputConfig["vb-min-y"],this.outputConfig["vb-width"],this.outputConfig["vb-height"]]}},i=/ data-layer-id="\d+"/g,s=/\s{2,}/g,u=()=>{o.l.innerHTML=f()};var l=a;function d(){const{x:e,y:t,width:n,height:r}=o.e.getBBox();Object.assign(a.outputConfig,{"vb-min-x":Math.trunc(e),"vb-min-y":Math.trunc(t),"vb-width":Math.trunc(n),"vb-height":Math.trunc(r)}),g(),Object(c.l)(a),y()}function f(){return`<svg xmlns="http://www.w3.org/2000/svg" \n    width="${a.outputConfig.width}" \n    height="${a.outputConfig.height}" \n    viewBox="${a.viewBox}" \n    preserveAspectRatio="${[a.outputConfig.ratio,a.outputConfig["slice-or-meet"]].join(" ")}">\n    <g transform="${Object(c.n)(a.transforms)}">${o.e.innerHTML}</g></svg>`.replace(i,"").replace(s," ")}function m(){return`data:image/svg+xml,${f().replace(/"/g,"'")}`.replace(/#/g,"%23")}function y(){window.localStorage.setItem("drawing",JSON.stringify(a))}function g(){Object(c.c)(o.l.firstElementChild,{width:a.outputConfig.width,height:a.outputConfig.height,viewBox:a.viewBox,preserveAspectRatio:[a.outputConfig.ratio,a.outputConfig["slice-or-meet"]].join(" ")})}const h="http://www.w3.org/2000/svg",p=(()=>{const e=Object(c.c)(document.createElement("label"),{draggable:!0}),t=Object(c.c)(document.createElement("span"),{contenteditable:!0}),n=Object(c.c)(document.createElement("input"),{type:"radio",name:"layer-selector"});return e.append(t,n),e})(),b=Object(c.c)(document.createElementNS(h,"circle"),{r:3,class:"control-point"}),x={path:document.createElementNS(h,"path"),rect:document.createElementNS(h,"rect"),ellipse:document.createElementNS(h,"ellipse")},v=document.createElement("a"),O=document.createElement("img"),j=document.createElement("canvas"),w=({x:e,y:t})=>({x:e,y:t}),C=(e,t)=>({cx:e,cy:t}),E=e=>({cx:e}),k=(e,t)=>({cy:t}),M={M:1,L:1,H:1,V:1,Q:2,C:3,A:1,S:2,T:1},S=(e,t)=>e.points.slice(0,t).reduce((e,t)=>e+M[t.cmd],0),B=(e,t)=>{const n=[];if(e.points[t+1]){const{cmd:r}=e.points[t+1];"V"===r?n.push(P(o.c[S(e,t+1)],E)):"H"===r&&n.push(P(o.c[S(e,t+1)],k))}return n};var I={regularPoint:L(w,(e,t,n)=>{const r=B(t,n);return[P(e,C),...r]}),hCmd:L(({x:e})=>({x:e}),(e,t,n)=>{const r=B(t,n);return[P(e,E),...r]}),vCmd:L(({y:e})=>({y:e}),(e,t,n)=>{const r=B(t,n);return[P(e,k),...r]}),firstControlPoint:L(({x:e,y:t})=>({x1:e,y1:t}),e=>[P(e,C)]),secondControlPoint:L(({x:e,y:t})=>({x2:e,y2:t}),e=>[P(e,C)]),rectTopLeft:L(w,(e,t,n)=>{const r=t.points[n];return[P(e,C),P(o.c[1],(e,t)=>({cx:e+r.width,cy:t+r.height}))]}),rectLowerRight:L(({x:e,y:t},n)=>({width:e>n.x?e-n.x:n.width,height:t>n.y?t-n.y:n.height}),(e,t,n)=>{const r=t.points[n];return[P(e,(e,t)=>{return{cx:e<r.x?r.x:e,cy:t<r.y?r.y:t}})]}),ellipseCenter:L(({x:e,y:t})=>({cx:e,cy:t}),(e,t,n)=>{const r=t.points[n];return[P(e,C),P(o.c[1],()=>({cx:r.cx-r.rx,cy:r.cy})),P(o.c[2],()=>({cx:r.cx,cy:r.cy-r.ry}))]}),rx:L(({x:e},t)=>({rx:Math.abs(e-t.cx)}),e=>[P(e,E)]),ry:L(({y:e},t)=>({ry:Math.abs(e-t.cy)}),e=>[P(e,k)])};function L(e,t){return{changeData:e,getAffectedPoints:t}}function P(e,t){return{ref:e,fx:t}}var N=n(3);const $=(e,t)=>(n,r)=>({x:Math.min(e,n),y:Math.min(t,r),width:Math.abs(e-n),height:Math.abs(t-r)}),T=(e,t)=>(n,r)=>({rx:Math.abs(e-n),ry:Math.abs(t-r)});var A={rect:R((e,t,n,r)=>{if(t[0])return;const a=o.i[e.layer];t.push({x:n,y:r}),Object(c.c)(a,t[0]),e.drawingShape=!0,Object.assign(e.shapeStart,{x:n,y:r}),o.o.onpointermove=Object(c.d)(a,$(n,r))},({points:[e]})=>({x:e.x,y:e.y,width:e.width||0,height:e.height||0})),ellipse:R((e,t,n,r)=>{if(t[0])return;const a=o.i[e.layer];t.push({cx:n,cy:r}),Object(c.c)(a,t[0]),e.drawingShape=!0,Object.assign(e.shapeStart,{x:n,y:r}),o.o.onpointermove=Object(c.d)(a,T(n,r))},({points:[e]})=>({cx:e.cx,cy:e.cy,rx:e.rx||0,ry:e.ry||0})),path:R((e,t,n,o,c,a)=>{const i=t[t.length-1];if(!i||n!==i.x||o!==i.y){if(t.length||(e.cmd="M"),i&&i.cmd===e.cmd&&["M","V","H"].includes(e.cmd)&&a(t.pop().cmd),t.push({cmd:e.cmd,x:n,y:o}),"Q"===e.cmd||"S"===e.cmd){const e=Object(N.d)(n,o,t[t.length-2]);Object.assign(t[t.length-1],e)}else if("C"===e.cmd){const e=Object(N.b)(n,o,t[t.length-2]);Object.assign(t[t.length-1],e)}else if("A"===e.cmd){const n=Object(N.a)(Object.assign({},r.c.arcCmdConfig,e.arcCmdConfig));Object.assign(t[t.length-1],n)}c(e.current,e.layer)(t[t.length-1],t.length-1)}},e=>({d:e.points.map(c.h).join("")+(e.closePath?"Z":"")}))};function R(e,t){return{mkPoint:e,geometryProps:t}}const D=document.getElementById("no-layer-msg").style;function q(e,t=o.i[e],n=l.layers[e]){Object(c.c)(t,A[n.mode].geometryProps(n)),y()}function H(e,t){for(let n=e;n<=t;n+=1){const e=o.g.children[n];e.dataset.layerId=n,o.i[n].dataset.layerId=n,e.children[0].textContent=l.layers[n].label||`Layer ${n+1}`,e.children[1].value=n}}function V(e,t=l.layers[e].style){Object(c.c)(o.i[e],t),y()}const{regularPoint:_,hCmd:Q,vCmd:J,firstControlPoint:U,secondControlPoint:K,rectTopLeft:Y,rectLowerRight:G,ellipseCenter:X,rx:Z,ry:z}=I,F=()=>{Object.assign(o.o,{onpointermove:null,onpointerleave:null,onpointerup:null})},W=(e,t,n)=>r=>{r.stopPropagation(),Object.assign(o.o,{onpointermove:oe(e,t,n,r.target),onpointerleave:F,onpointerup:F})};function ee(e){o.c[o.c.length-1].remove(),["Q","C","S"].includes(e)&&o.c[o.c.length-1].remove(),"C"===e&&o.c[o.c.length-1].remove()}function te(){[...o.c].forEach(e=>e.remove())}function ne(e,t){return(n,r)=>{const c=[];n.cmd?(["M","L","Q","C","A","S","T"].includes(n.cmd)?c.push(re(n.x,n.y,r,_,t)):"H"===n.cmd?c.push(re(n.x,e.points[r-1].y,r,Q,t)):"V"===n.cmd&&c.push(re(e.points[r-1].x,n.y,r,J,t)),["Q","C","S"].includes(n.cmd)&&c.push(re(n.x1,n.y1,r,U,t)),"C"===n.cmd&&c.push(re(n.x2,n.y2,r,K,t))):void 0!==n.width?c.push(re(n.x,n.y,r,Y,t),re(n.x+n.width,n.y+n.height,r,G,t)):void 0!==n.cx&&c.push(re(n.cx,n.cy,r,X,t),re(n.cx-n.rx,n.cy,r,Z,t),re(n.cx,n.cy-n.ry,r,z,t)),o.b.append(...c)}}function re(e,t,n,r,o){return Object(c.b)(b)({cx:e,cy:t,onpointerdown:W(o,n,r),onpointerup:F})}function oe(e,t,n,r){const o=l.layers[e],a=o.points[t],{changeData:i}=n,s=n.getAffectedPoints(r,o,t);return t=>{const[n,r]=Object(c.g)(t);Object.assign(a,i({x:n,y:r},a)),q(e),s.forEach(({ref:e,fx:t})=>Object(c.c)(e,t(n,r)))}}const ce=Object.keys(A),ae=le(e=>"boolean"==typeof e,()=>{}),ie={mode:le(e=>ce.includes(e),e=>{document.querySelector(`input[type="radio"][value="${e}"]`).checked=!0,document.body.dataset.mode=e}),cmd:le(e=>r.a.includes(e),e=>{document.querySelector(`option[value="${e}"]`).selected=!0}),layer:{},drawingShape:ae,reordering:ae,transformLayerNotDrawing:ae},se=new Proxy(Object.assign({get current(){return l.layers[se.layer]},keys:Object.keys(ie)},{cmd:"M",arcCmdConfig:{},drawingShape:!1,shapeStart:{},reordering:!1}),{set:(e,t,n)=>!(!se.keys.includes(t)||!ie[t].validate(n))&&(e[t]=n,ie[t].onPass(n),!0)});Object.assign(ie.layer,le(e=>+e>=0&&+e<=l.layers.length,e=>{const t=ne(se.current,e);te(),l.layers[e].points.forEach(t),o.k.checked=se.current.closePath,Object(c.k)(l.layers[e].style),Object(c.j)(se,r.c),o.r.checked&&Object(c.m)(l.layers[e].transforms),Object(c.a)(l,se)}));var ue=se;function le(e,t){return{validate:e,onPass:t}}const de=j.getContext("2d"),fe=e=>{Object.assign(v,{download:`My_SVG.${l.outputConfig["file-format"]}`,href:e}),v.click()},me=e=>window.navigator.clipboard.writeText(e);function ye(){const e=Object(c.f)(ue.mode);var t,n,a;ue.layer=l.layers.push((t=ue.mode,n=Object.assign({},r.c.style,e),a=Object(c.i)(r.c.transforms),{mode:t,points:[],style:n,transforms:a}))-1,y();const i=Object(c.b)(x[ue.mode])({"data-layer-id":ue.layer});o.e.append(i)}function ge(){if(!ue.current)return;const e=ue.current.points.pop();if(e)if(e.cmd)ee(e.cmd),q(ue.layer);else{const e=o.i[ue.layer],t=["data-layer-id","transform"];te(),e.getAttributeNames().filter(e=>!t.includes(e)).forEach(t=>e.removeAttribute(t)),y()}}new MutationObserver(function(e,t,n){const a=e=>{e.dataTransfer.setData("text",e.target.dataset.layerId),e.dataTransfer.effectAllowed="move"},i=({target:t})=>{e.current.label=t.textContent.replace(/\n/g,/\s/).trim(),y()},s=()=>{const t=o.g.childElementCount,n=p.cloneNode(!0),[r,s]=n.children;n.dataset.layerId=t,Object(c.c)(r,{textContent:l.layers[t]&&l.layers[t].label||`Layer ${t+1}`}),Object(c.c)(s,{value:t,checked:e.layer===o.h.length}),n.ondragstart=a,r.oninput=i,o.g.append(n)},u=a=>{const i=+a.dataset.layerId;if(o.g.lastChild.remove(),!o.i.length)return delete e.layer,t(),Object(c.m)(r.c.transforms),Object(c.a)(l,e),void Object(c.k)(r.c.style);if(e.layer===o.i.length)e.layer-=1;else{const r=n(e.current,e.layer);e.mode=e.current.mode,t(),e.current.points.forEach(r),Object(c.k)(e.current.style),H(i,o.g.childElementCount-1)}o.h[e.layer].checked=!0};return t=>{D.display=o.e.childElementCount?"none":"initial",e.reordering?e.reordering=!1:t.forEach(e=>{e.addedNodes.forEach(s),e.removedNodes.forEach(u)})}}(ue,te,ne)).observe(o.e,{childList:!0}),window.addEventListener("DOMContentLoaded",(function(){const e=JSON.parse(window.localStorage.getItem("drawing"))||{};Object.assign(l,{outputConfig:e.outputConfig||Object.assign({},r.c.outputConfig),transforms:e.transforms||Object(c.i)(r.c.transforms),layers:e.layers||[]}),ue.mode=l.layers[0]&&l.layers[0].mode?l.layers[0].mode:r.c.mode,l.layers.length&&(ue.layer=0,o.k.checked=ue.current.closePath),document.querySelector('option[value="M"]').selected=!0,o.e.append(...l.layers.map((e,t)=>{const n=x[e.mode],r="path"===e.mode?{d:e.points.map(c.h).join(" ")+(e.closePath?"Z":"")}:e.points[0]||{},o={"data-layer-id":t,...e.style,...r,transform:Object(c.n)(e.transforms)};return Object(c.b)(n)(o)})),Object(c.a)(l,ue),Object(c.m)(l.transforms||r.c.transforms),o.r.checked=!1,Object(c.j)(ue,r.c),Object(c.l)(l)})),window.onsubmit=e=>e.preventDefault(),window.onkeydown=function(e){if("#drawing"!==window.location.hash)return;const{key:t}=e;if(r.d[t]){if(e.preventDefault(),!e.ctrlKey&&!ue.current)return;const{transforms:{translate:n}}=e.ctrlKey?l:ue.current,{cb:o,prop:a}=r.d[t];n[a]=o(n[a]),Object(c.a)(l,ue)}document.activeElement===document.body&&("Backspace"===t?(e.preventDefault(),ge()):!e.ctrlKey&&r.a.includes(t.toUpperCase())&&(e.preventDefault(),ue.cmd=t.toUpperCase()))},o.g.onchange=function({target:e}){const t=+e.value;ue.mode=l.layers[t].mode,ue.layer=t},o.g.ondrop=function(e){const t=+e.target.closest("label").dataset.layerId,n=o.i[t],r=+e.dataTransfer.getData("text"),c=o.i[r],[a]=l.layers.splice(r,1);l.layers.splice(t,0,a),y(),r<t?n.after(c):o.e.insertBefore(c,n),r!==ue.layer?r>ue.layer&&t<=ue.layer?ue.layer+=1:r<ue.layer&&t>ue.layer&&(ue.layer-=1):ue.layer=t,H(Math.min(r,t),Math.max(r,t)),o.h[ue.layer].checked=!0,ue.reordering=!0,e.preventDefault()},o.k.onchange=function(){l.layers[ue.layer]&&(l.layers[ue.layer].closePath=o.k.checked,q(ue.layer))},o.a.oninput=function({target:e}){const t="checkbox"===e.type?"checked":"value";if(ue.arcCmdConfig[e.name]=e[t],!ue.current)return;const n=Object(c.e)(ue.current.points)||{},o=Object.assign({},r.c.arcCmdConfig,ue.arcCmdConfig);Object.assign(n,Object(N.a)(o)),q(ue.layer)},o.f.oninput=function({target:e}){l.layers[ue.layer]&&(l.layers[ue.layer].style[e.name]=e.value,V(ue.layer))},o.r.onchange=function({target:e}){e.checked?Object(c.m)(ue.current?ue.current.transforms:r.c.transforms):Object(c.m)(l.transforms),ue.transformLayerNotDrawing=e.checked},o.p.oninput=function({target:e}){const t=ue.transformLayerNotDrawing?ue.current:l;e.classList.contains("transform-config")?t.transforms[e.dataset.transform][+e.dataset.id]=e.value:t.transforms[e.name]=e.value,y(),Object(c.a)(l,ue)},o.j.oninput=function({target:e}){l.outputConfig[e.name]=e.value,y(),g()},o.d.onclick=function(){const e=m();"svg"===l.outputConfig["file-format"]?fe(e):(O.src=e,O.onload=()=>{de.clearRect(0,0,de.canvas.width,de.canvas.height),Object.assign(de.canvas,{width:l.outputConfig.width,height:l.outputConfig.height}),de.drawImage(O,0,0),fe(j.toDataURL())})},o.o.addEventListener("pointerdown",(function(e){o.i.length||ye();const[t,n]=Object(c.g)(e),{points:r}=ue.current;if(ue.drawingShape){const e={hor:Math.abs(ue.shapeStart.x-t),vert:Math.abs(ue.shapeStart.y-n)},c="rect"===ue.mode?{x:Math.min(ue.shapeStart.x,t),y:Math.min(ue.shapeStart.y,n),width:e.hor,height:e.vert}:{rx:e.hor,ry:e.vert};Object.assign(r[0],c),ne(ue.current,ue.layer)(r[r.length-1],r.length-1),ue.drawingShape=!1,o.o.onpointermove=null}else A[ue.mode].mkPoint(ue,r,t,n,ne,ee);V(ue.layer),q(ue.layer)})),document.getElementById("commands").onchange=function({target:e}){ue.cmd=r.a[r.a.indexOf(e.value)]||r.a[0]},document.getElementById("modes").onchange=function({target:e}){if(ue.drawingShape)ue.mode=ue.mode;else if(ue.mode=e.value,o.i[ue.layer])if(ue.current.points.length)ye();else{ue.current.mode=ue.mode;const e=Object(c.b)(x[ue.mode])({"data-layer-id":ue.layer});o.e.replaceChild(e,o.i[ue.layer]),Object.keys(ue.current.style).forEach(e=>{void 0===r.c.style[e]&&delete ue.current.style[e]}),Object.assign(ue.current.style,Object(c.f)(ue.mode))}},document.getElementById("reset-transforms").onclick=function(){const{transforms:e}=r.c;o.r.checked&&ue.current?ue.current.transforms=Object(c.i)(e):l.transforms=Object(c.i)(e),y(),Object(c.a)(l,ue),Object(c.m)(e)},document.getElementById("get-markup").onclick=function(){me(f())},document.getElementById("get-data-uri").onclick=function(){me(m())},document.getElementById("center-rotation-btn").onclick=function(){!function(e,t){const{x:n,y:o,width:c,height:a}=e.getBBox(),i=[Math.trunc(n+.5*c),Math.trunc(o+.5*a)];[r.b.rotate[1].value,r.b.rotate[2].value]=i,[t.rotate[1],t.rotate[2]]=i}(...ue.transformLayerNotDrawing?[o.i[ue.layer],ue.current.transforms]:[o.o.firstElementChild,l.transforms]),Object(c.a)(l,ue),y()},document.getElementById("center-vb").onclick=d,document.getElementById("add-layer").onclick=ye,document.getElementById("del-layer").onclick=function(){o.i.length&&(l.layers.splice(ue.layer,1),y(),o.i[ue.layer].remove())},document.getElementById("clear-all").onclick=function(){window.localStorage.removeItem("drawing"),l.layers.length=0,l.outputConfig=Object.assign({},r.c.outputConfig),l.transforms=Object(c.i)(r.c.transforms),[...o.i].forEach(e=>e.remove())},document.getElementById("undo").onclick=ge,document.querySelector('a[data-tab-name="output"]').onclick=function(){u(),4===a.viewBox.filter(e=>0===e).length&&d()}}]);