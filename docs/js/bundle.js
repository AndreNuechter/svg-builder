!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return i})),n.d(t,"f",(function(){return s})),n.d(t,"i",(function(){return u})),n.d(t,"g",(function(){return l})),n.d(t,"h",(function(){return d})),n.d(t,"j",(function(){return f})),n.d(t,"k",(function(){return y})),n.d(t,"l",(function(){return m})),n.d(t,"m",(function(){return x})),n.d(t,"n",(function(){return b})),n.d(t,"o",(function(){return g})),n.d(t,"q",(function(){return p})),n.d(t,"p",(function(){return h})),n.d(t,"r",(function(){return v}));const r=document.getElementById("arc-cmd-config"),o=document.getElementsByClassName("control-point"),c=document.getElementById("control-point-container"),a=document.getElementById("download-btn"),i=document.getElementById("drawing-content"),s=document.getElementById("fill-and-stroke"),u=i.children,l=document.getElementById("layer-select"),d=document.getElementsByName("layer-selector"),f=document.getElementById("output-configuration"),m=document.getElementById("preview"),y=document.getElementById("close-path-toggle"),g=document.getElementById("canvas"),h=document.getElementById("transformations"),p=h.elements,b=p.scale.getElementsByTagName("input"),x=p.rotate.getElementsByTagName("input"),[v]=document.getElementsByName("transform-layer-only")},function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return f})),n.d(t,"b",(function(){return d})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return y})),n.d(t,"f",(function(){return g})),n.d(t,"g",(function(){return h})),n.d(t,"h",(function(){return p})),n.d(t,"i",(function(){return b})),n.d(t,"j",(function(){return x})),n.d(t,"k",(function(){return v})),n.d(t,"l",(function(){return O})),n.d(t,"m",(function(){return j})),n.d(t,"n",(function(){return w}));var r=n(3),o=n(0),c=n(2);const a=["checked","textContent","data","onpointerdown","onpointerup"],{elements:i}=o.f,{elements:s}=o.j,u=(e,t)=>{Object.entries(t).forEach(([t,n])=>{const r=e[t];"SELECT"===r.tagName?[...r.options].forEach(e=>{e.selected=e.value===n}):r.value=n})};function l(e,t){const n=w(e.transforms),r=[o.e,o.b],c=[n];if(o.i[t.layer]){const e=w(t.current.transforms);r.push(o.i[t.layer]),c.push(n+e,e)}else c.push(n);r.forEach((e,t)=>e.setAttribute("transform",c[t]))}function d(e){return t=>f(e.cloneNode(!1),t)}function f(e,t){return Object.keys(t).forEach(n=>{a.includes(n)?e[n]=t[n]:e.setAttribute(n,t[n])}),e}function m(e,t){return n=>{const[r,o]=h(n);f(e,t(r,o))}}function y(e){return e.slice().reverse().find(e=>"A"===e.cmd)}function g(e){return[...i].filter(t=>t.hasAttribute("name")&&t.closest("label").classList.contains(`for-${e}`)).reduce((e,t)=>Object.assign(e,{[t.name]:t.value}),{})}function h({x:e,y:t}){let n=o.o.createSVGPoint();return Object.assign(n,{x:e,y:t}),n=n.matrixTransform(o.o.children[1].getScreenCTM().inverse()),[n.x,n.y]}function p(e){return e.cmd+r.c[e.cmd](e).join(" ")}function b(e){return JSON.parse(JSON.stringify(e))}function x(e,t){const n=e.current?y(e.current.points)||{...t.arcCmdConfig,...e.arcCmdConfig}:t.arcCmdConfig;Object.assign(e.arcCmdConfig,n),Object.entries(n).filter(([e])=>!["cmd","x","y"].includes(e)).forEach(([e,t])=>{const n=o.a.elements[e];n["checkbox"===n.type?"checked":"value"]=t})}function v(e){u(i,e)}function O({outputConfig:e}){u(s,e)}function j(e){Object.entries(e).filter(([e])=>"translate"!==e).forEach(([e,t])=>{c.b[e]?t.forEach((t,n)=>{c.b[e][n].value=t}):o.q[e].value=t})}function w(e){return Object.entries(e).reduce((e,[t,n])=>`${e}${t}(${"object"==typeof n?n.filter(e=>""!==e):n})`,"")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return l}));var r=n(0),o=n(3);const c=Object.keys(o.c),a={scale:r.n,rotate:r.m},i={mode:"path",closePath:!1,outputConfig:{width:320,height:180,"vb-min-x":0,"vb-min-y":0,"vb-width":0,"vb-height":0,ratio:"xMidYMid","slice-or-meet":"meet","file-format":"svg"},transforms:{translate:[0,0],scale:[1,1],rotate:[0,0,0],skewX:0,skewY:0},style:{stroke:"#000","stroke-opacity":1,"stroke-width":2,fill:"none","fill-opacity":1},arcCmdConfig:{xR:50,yR:50,xRot:0,large:!1,sweep:!1}},s=e=>e+1,u=e=>e-1,l={ArrowUp:{prop:1,cb:u},ArrowDown:{prop:1,cb:s},ArrowLeft:{prop:0,cb:u},ArrowRight:{prop:0,cb:s}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return s}));const r={H:({x:e})=>[e],V:({y:e})=>[e],Q:e=>[e.x1,e.y1,e.x,e.y],C:e=>[e.x1,e.y1,e.x2,e.y2,e.x,e.y],A:e=>[e.xR,e.yR,e.xRot,e.large,e.sweep,e.x,e.y],S:e=>[e.x1,e.y1,e.x,e.y],T:({x:e,y:t})=>[e,t],M:({x:e,y:t})=>[e,t],L:({x:e,y:t})=>[e,t]},o=(e,t,n,r)=>e<t?n>r?-33:33:0,c=(e,t,n,r)=>{const c=Math.abs(n-e),a=Math.abs(r-t);return{xMin:Math.min(e,n),yMin:Math.min(t,r),yOffset:o(a,c,n,e),xOffset:o(c,a,r,t)}};function a(e){return{xR:e.xR,yR:e.yR,xRot:e.xRot,large:+e.large,sweep:+e.sweep}}function i(e,t,{x:n,y:r}){const{xMin:o,yMin:a,yOffset:i,xOffset:s}=c(e,t,n,r);return{x1:o-s+.25*(Math.max(e,n)-o),y1:a-i+.25*(Math.max(t,r)-a),x2:o-s+.75*(Math.max(e,n)-o),y2:a-i+.75*(Math.max(t,r)-a)}}function s(e,t,{x:n,y:r}){const{xMin:o,yMin:a,yOffset:i,xOffset:s}=c(e,t,n,r);return{x1:o-s+.5*(Math.max(e,n)-o),y1:a-i+.5*(Math.max(t,r)-a)}}},function(e,t,n){n(8),n(5),n(6),e.exports=n(7)},function(e,t,n){"use strict";n.r(t);var r=n(1),o=n(0);const c=document.getElementById("coords");o.o.addEventListener("pointermove",e=>{const[t,n]=Object(r.g)(e);c.textContent=`x: ${Math.trunc(t)}, y: ${Math.trunc(n)}`,c.style.left=`${e.pageX-120}px`,c.style.top=`${e.pageY-40}px`}),o.o.addEventListener("pointerleave",()=>{c.style=null})},function(e,t){(()=>{const e=({target:{parentElement:{classList:e}}})=>{e.toggle("open"),e.toggle("closed")};[...document.getElementsByClassName("togglable")].forEach(t=>{t.firstElementChild.onclick=e,t.classList.contains("open")||t.classList.contains("closed")||t.classList.add("open")})})()},function(e,t){(()=>{const e=window.location.hash.slice(1),{body:t}=document,n=document.getElementById("tabs"),r=[...n.children];window.addEventListener("DOMContentLoaded",()=>{const n=["drawing","output"],r=n.includes(e)?e:n[0];window.location.hash=r,t.dataset.activeTab=r,document.querySelector(`a[data-tab-name="${r}"]`).click()}),n.onclick=({target:e})=>{e.classList.contains("tab")&&(t.dataset.activeTab=e.dataset.tabName,r.forEach(e=>e.classList.remove("active")),e.classList.add("active"))}})()},function(e,t,n){"use strict";n.r(t);var r=n(2),o=n(0),c=n(1);const a={get viewBox(){return[this.outputConfig["vb-min-x"],this.outputConfig["vb-min-y"],this.outputConfig["vb-width"],this.outputConfig["vb-height"]]}},i=/ data-layer-id="\d+"/g,s=/\s{2,}/g;var u=a;function l(){const{x:e,y:t,width:n,height:r}=o.e.getBBox();Object.assign(a.outputConfig,{"vb-min-x":Math.trunc(e),"vb-min-y":Math.trunc(t),"vb-width":Math.trunc(n),"vb-height":Math.trunc(r)}),y(),Object(c.l)(a),m()}function d(){return`<svg xmlns="http://www.w3.org/2000/svg" \n    width="${a.outputConfig.width}" \n    height="${a.outputConfig.height}" \n    viewBox="${a.viewBox}" \n    preserveAspectRatio="${[a.outputConfig.ratio,a.outputConfig["slice-or-meet"]].join(" ")}">\n    <g transform="${Object(c.n)(a.transforms)}">${o.e.innerHTML}</g></svg>`.replace(i,"").replace(s," ")}function f(){return`data:image/svg+xml,${d().replace(/"/g,"'")}`.replace(/#/g,"%23")}function m(){window.localStorage.setItem("drawing",JSON.stringify(a))}function y(){Object(c.c)(o.l.firstElementChild,{width:a.outputConfig.width,height:a.outputConfig.height,viewBox:a.viewBox,preserveAspectRatio:[a.outputConfig.ratio,a.outputConfig["slice-or-meet"]].join(" ")})}const g="http://www.w3.org/2000/svg",h=(()=>{const e=Object(c.c)(document.createElement("label"),{draggable:!0}),t=Object(c.c)(document.createElement("span"),{contenteditable:!0}),n=Object(c.c)(document.createElement("input"),{type:"radio",name:"layer-selector"});return e.append(t,n),e})(),p=Object(c.c)(document.createElementNS(g,"circle"),{r:3,class:"control-point"}),b={path:document.createElementNS(g,"path"),rect:document.createElementNS(g,"rect"),ellipse:document.createElementNS(g,"ellipse")},x=document.createElement("a"),v=document.createElement("img"),O=document.createElement("canvas"),j=({x:e,y:t})=>({x:e,y:t}),w=(e,t)=>({cx:e,cy:t}),C=e=>({cx:e}),E=(e,t)=>({cy:t}),k={M:1,L:1,H:1,V:1,Q:2,C:3,A:1,S:2,T:1},M=(e,t)=>e.points.slice(0,t).reduce((e,t)=>e+k[t.cmd],0),S=(e,t)=>{const n=[];if(e.points[t+1]){const{cmd:r}=e.points[t+1];"V"===r?n.push(L(o.c[M(e,t+1)],C)):"H"===r&&n.push(L(o.c[M(e,t+1)],E))}return n};var B={regularPoint:I(j,(e,t,n)=>{const r=S(t,n);return[L(e,w),...r]}),hCmd:I(({x:e})=>({x:e}),(e,t,n)=>{const r=S(t,n);return[L(e,C),...r]}),vCmd:I(({y:e})=>({y:e}),(e,t,n)=>{const r=S(t,n);return[L(e,E),...r]}),firstControlPoint:I(({x:e,y:t})=>({x1:e,y1:t}),e=>[L(e,w)]),secondControlPoint:I(({x:e,y:t})=>({x2:e,y2:t}),e=>[L(e,w)]),rectTopLeft:I(j,(e,t,n)=>{const r=t.points[n];return[L(e,w),L(o.c[1],(e,t)=>({cx:e+r.width,cy:t+r.height}))]}),rectLowerRight:I(({x:e,y:t},n)=>({width:e>n.x?e-n.x:n.width,height:t>n.y?t-n.y:n.height}),(e,t,n)=>{const r=t.points[n];return[L(e,(e,t)=>{return{cx:e<r.x?r.x:e,cy:t<r.y?r.y:t}})]}),ellipseCenter:I(({x:e,y:t})=>({cx:e,cy:t}),(e,t,n)=>{const r=t.points[n];return[L(e,w),L(o.c[1],()=>({cx:r.cx-r.rx,cy:r.cy})),L(o.c[2],()=>({cx:r.cx,cy:r.cy-r.ry}))]}),rx:I(({x:e},t)=>({rx:Math.abs(e-t.cx)}),e=>[L(e,C)]),ry:I(({y:e},t)=>({ry:Math.abs(e-t.cy)}),e=>[L(e,E)])};function I(e,t){return{changeData:e,getAffectedPoints:t}}function L(e,t){return{ref:e,fx:t}}var P=n(3);const N=(e,t)=>(n,r)=>({x:Math.min(e,n),y:Math.min(t,r),width:Math.abs(e-n),height:Math.abs(t-r)}),$=(e,t)=>(n,r)=>({rx:Math.abs(e-n),ry:Math.abs(t-r)});var T={rect:A((e,t,n,r)=>{if(t[0])return;const a=o.i[e.layer];t.push({x:n,y:r}),Object(c.c)(a,t[0]),e.drawingShape=!0,Object.assign(e.shapeStart,{x:n,y:r}),o.o.onpointermove=Object(c.d)(a,N(n,r))},({points:[e]})=>({x:e.x,y:e.y,width:e.width||0,height:e.height||0})),ellipse:A((e,t,n,r)=>{if(t[0])return;const a=o.i[e.layer];t.push({cx:n,cy:r}),Object(c.c)(a,t[0]),e.drawingShape=!0,Object.assign(e.shapeStart,{x:n,y:r}),o.o.onpointermove=Object(c.d)(a,$(n,r))},({points:[e]})=>({cx:e.cx,cy:e.cy,rx:e.rx||0,ry:e.ry||0})),path:A((e,t,n,o,c,a)=>{const i=t[t.length-1];if(!i||n!==i.x||o!==i.y){if(t.length||(e.cmd="M"),i&&i.cmd===e.cmd&&["M","V","H"].includes(e.cmd)&&a(t.pop().cmd),t.push({cmd:e.cmd,x:n,y:o}),"Q"===e.cmd||"S"===e.cmd){const e=Object(P.d)(n,o,t[t.length-2]);Object.assign(t[t.length-1],e)}else if("C"===e.cmd){const e=Object(P.b)(n,o,t[t.length-2]);Object.assign(t[t.length-1],e)}else if("A"===e.cmd){const n=Object(P.a)(Object.assign({},r.c.arcCmdConfig,e.arcCmdConfig));Object.assign(t[t.length-1],n)}c(e.current,e.layer)(t[t.length-1],t.length-1)}},e=>({d:e.points.map(c.h).join("")+(e.closePath?"Z":"")}))};function A(e,t){return{mkPoint:e,geometryProps:t}}const R=document.getElementById("no-layer-msg").style;function D(e,t=o.i[e],n=u.layers[e]){Object(c.c)(t,T[n.mode].geometryProps(n)),m()}function q(e,t){for(let n=e;n<=t;n+=1){const e=o.g.children[n];e.dataset.layerId=n,o.i[n].dataset.layerId=n,e.children[0].textContent=u.layers[n].label||`Layer ${n+1}`,e.children[1].value=n}}function H(e,t=u.layers[e].style){Object(c.c)(o.i[e],t),m()}const{regularPoint:V,hCmd:_,vCmd:Q,firstControlPoint:J,secondControlPoint:U,rectTopLeft:Y,rectLowerRight:G,ellipseCenter:K,rx:X,ry:Z}=B,z=()=>{Object.assign(o.o,{onpointermove:null,onpointerleave:null,onpointerup:null})},F=(e,t,n)=>r=>{r.stopPropagation(),Object.assign(o.o,{onpointermove:re(e,t,n,r.target),onpointerleave:z,onpointerup:z})};function W(e){o.c[o.c.length-1].remove(),["Q","C","S"].includes(e)&&o.c[o.c.length-1].remove(),"C"===e&&o.c[o.c.length-1].remove()}function ee(){[...o.c].forEach(e=>e.remove())}function te(e,t){return(n,r)=>{const c=[];n.cmd?(["M","L","Q","C","A","S","T"].includes(n.cmd)?c.push(ne(n.x,n.y,r,V,t)):"H"===n.cmd?c.push(ne(n.x,e.points[r-1].y,r,_,t)):"V"===n.cmd&&c.push(ne(e.points[r-1].x,n.y,r,Q,t)),["Q","C","S"].includes(n.cmd)&&c.push(ne(n.x1,n.y1,r,J,t)),"C"===n.cmd&&c.push(ne(n.x2,n.y2,r,U,t))):void 0!==n.width?c.push(ne(n.x,n.y,r,Y,t),ne(n.x+n.width,n.y+n.height,r,G,t)):void 0!==n.cx&&c.push(ne(n.cx,n.cy,r,K,t),ne(n.cx-n.rx,n.cy,r,X,t),ne(n.cx,n.cy-n.ry,r,Z,t)),o.b.append(...c)}}function ne(e,t,n,r,o){return Object(c.b)(p)({cx:e,cy:t,onpointerdown:F(o,n,r),onpointerup:z})}function re(e,t,n,r){const o=u.layers[e],a=o.points[t],{changeData:i}=n,s=n.getAffectedPoints(r,o,t);return t=>{const[n,r]=Object(c.g)(t);Object.assign(a,i({x:n,y:r},a)),D(e),s.forEach(({ref:e,fx:t})=>Object(c.c)(e,t(n,r)))}}const oe=Object.keys(T),ce=ue(e=>"boolean"==typeof e,()=>{}),ae={mode:ue(e=>oe.includes(e),e=>{document.querySelector(`input[type="radio"][value="${e}"]`).checked=!0,document.body.dataset.mode=e}),cmd:ue(e=>r.a.includes(e),e=>{document.querySelector(`option[value="${e}"]`).selected=!0}),layer:{},drawingShape:ce,reordering:ce,transformLayerNotDrawing:ce},ie=new Proxy(Object.assign({get current(){return u.layers[ie.layer]},keys:Object.keys(ae)},{cmd:"M",arcCmdConfig:{},drawingShape:!1,shapeStart:{},reordering:!1}),{set:(e,t,n)=>!(!ie.keys.includes(t)||!ae[t].validate(n))&&(e[t]=n,ae[t].onPass(n),!0)});Object.assign(ae.layer,ue(e=>+e>=0&&+e<=u.layers.length,e=>{const t=te(ie.current,e);ee(),u.layers[e].points.forEach(t),o.k.checked=ie.current.closePath,Object(c.k)(u.layers[e].style),Object(c.j)(ie,r.c),o.r.checked&&Object(c.m)(u.layers[e].transforms),Object(c.a)(u,ie)}));var se=ie;function ue(e,t){return{validate:e,onPass:t}}const le=O.getContext("2d"),de=e=>{Object.assign(x,{download:`My_SVG.${u.outputConfig["file-format"]}`,href:e}),x.click()},fe=e=>window.navigator.clipboard.writeText(e);function me(){const e=Object(c.f)(se.mode);var t,n,a;se.layer=u.layers.push((t=se.mode,n=Object.assign({},r.c.style,e),a=Object(c.i)(r.c.transforms),{mode:t,points:[],style:n,transforms:a}))-1,m();const i=Object(c.b)(b[se.mode])({"data-layer-id":se.layer});o.e.append(i)}function ye(){if(!se.current)return;const e=se.current.points.pop();if(e)if(e.cmd)W(e.cmd),D(se.layer);else{const e=o.i[se.layer],t=["data-layer-id","transform"];ee(),e.getAttributeNames().filter(e=>!t.includes(e)).forEach(t=>e.removeAttribute(t)),m()}}new MutationObserver(function(e,t,n){const a=e=>{e.dataTransfer.setData("text",e.target.dataset.layerId),e.dataTransfer.effectAllowed="move"},i=({target:t})=>{e.current.label=t.textContent.replace(/\n/g,/\s/).trim(),m()},s=()=>{const t=o.g.childElementCount,n=h.cloneNode(!0),[r,s]=n.children;n.dataset.layerId=t,Object(c.c)(r,{textContent:u.layers[t]&&u.layers[t].label||`Layer ${t+1}`}),Object(c.c)(s,{value:t,checked:e.layer===o.h.length}),n.ondragstart=a,r.oninput=i,o.g.append(n)},l=a=>{const i=+a.dataset.layerId;if(o.g.lastChild.remove(),!o.i.length)return delete e.layer,t(),Object(c.m)(r.c.transforms),Object(c.a)(u,e),void Object(c.k)(r.c.style);if(e.layer===o.i.length)e.layer-=1;else{const r=n(e.current,e.layer);e.mode=e.current.mode,t(),e.current.points.forEach(r),Object(c.k)(e.current.style),q(i,o.g.childElementCount-1)}o.h[e.layer].checked=!0};return t=>{R.display=o.e.childElementCount?"none":"initial",e.reordering?e.reordering=!1:t.forEach(e=>{e.addedNodes.forEach(s),e.removedNodes.forEach(l)})}}(se,ee,te)).observe(o.e,{childList:!0}),window.addEventListener("DOMContentLoaded",(function(){const e=JSON.parse(window.localStorage.getItem("drawing"))||{};Object.assign(u,{outputConfig:e.outputConfig||Object.assign({},r.c.outputConfig),transforms:e.transforms||Object(c.i)(r.c.transforms),layers:e.layers||[]}),se.mode=u.layers[0]&&u.layers[0].mode?u.layers[0].mode:r.c.mode,u.layers.length&&(se.layer=0,o.k.checked=se.current.closePath),document.querySelector('option[value="M"]').selected=!0,o.e.append(...u.layers.map((e,t)=>{const n=b[e.mode],r="path"===e.mode?{d:e.points.map(c.h).join(" ")+(e.closePath?"Z":"")}:e.points[0]||{},o={"data-layer-id":t,...e.style,...r,transform:Object(c.n)(e.transforms)};return Object(c.b)(n)(o)})),Object(c.a)(u,se),Object(c.m)(u.transforms||r.c.transforms),o.r.checked=!1,Object(c.j)(se,r.c),Object(c.l)(u)})),window.onsubmit=e=>e.preventDefault(),window.onkeydown=function(e){if("#drawing"!==window.location.hash)return;const{key:t}=e,n=r.d[t];if("Enter"===t&&e.target.contentEditable&&e.target.blur(),document.activeElement===document.body){if(n){if(!se.current&&!e.ctrlKey)return;const{transforms:{translate:t}}=e.ctrlKey?u:se.current,{cb:r,prop:o}=n;t[o]=r(t[o]),Object(c.a)(u,se)}else"Backspace"===t?ye():r.a.includes(t.toUpperCase())&&(se.cmd=t.toUpperCase());e.preventDefault()}},o.g.onchange=function({target:e}){const t=+e.value;se.mode=u.layers[t].mode,se.layer=t},o.g.ondrop=function(e){const t=+e.target.closest("label").dataset.layerId,n=o.i[t],r=+e.dataTransfer.getData("text"),c=o.i[r],[a]=u.layers.splice(r,1);u.layers.splice(t,0,a),m(),r<t?n.after(c):o.e.insertBefore(c,n),r!==se.layer?r>se.layer&&t<=se.layer?se.layer+=1:r<se.layer&&t>se.layer&&(se.layer-=1):se.layer=t,q(Math.min(r,t),Math.max(r,t)),o.h[se.layer].checked=!0,se.reordering=!0,e.preventDefault()},o.k.onchange=function(){u.layers[se.layer]&&(u.layers[se.layer].closePath=o.k.checked,D(se.layer))},o.a.oninput=function({target:e}){const t="checkbox"===e.type?"checked":"value";if(se.arcCmdConfig[e.name]=e[t],!se.current)return;const n=Object(c.e)(se.current.points)||{},o=Object.assign({},r.c.arcCmdConfig,se.arcCmdConfig);Object.assign(n,Object(P.a)(o)),D(se.layer)},o.f.oninput=function({target:e}){u.layers[se.layer]&&(u.layers[se.layer].style[e.name]=e.value,H(se.layer))},o.r.onchange=function({target:e}){e.checked?Object(c.m)(se.current?se.current.transforms:r.c.transforms):Object(c.m)(u.transforms),se.transformLayerNotDrawing=e.checked},o.p.oninput=function({target:e}){const t=se.transformLayerNotDrawing?se.current:u;e.classList.contains("transform-config")?t.transforms[e.dataset.transform][+e.dataset.id]=e.value:t.transforms[e.name]=e.value,m(),Object(c.a)(u,se)},o.j.oninput=function({target:e}){u.outputConfig[e.name]=e.value,m(),y()},o.d.onclick=function(){const e=f();"svg"===u.outputConfig["file-format"]?de(e):(v.src=e,v.onload=()=>{le.clearRect(0,0,le.canvas.width,le.canvas.height),Object.assign(le.canvas,{width:u.outputConfig.width,height:u.outputConfig.height}),le.drawImage(v,0,0),de(O.toDataURL())})},o.o.addEventListener("pointerdown",(function(e){o.i.length||me();const[t,n]=Object(c.g)(e),{points:r}=se.current;if(se.drawingShape){const e={hor:Math.abs(se.shapeStart.x-t),vert:Math.abs(se.shapeStart.y-n)},c="rect"===se.mode?{x:Math.min(se.shapeStart.x,t),y:Math.min(se.shapeStart.y,n),width:e.hor,height:e.vert}:{rx:e.hor,ry:e.vert};Object.assign(r[0],c),te(se.current,se.layer)(r[r.length-1],r.length-1),se.drawingShape=!1,o.o.onpointermove=null}else T[se.mode].mkPoint(se,r,t,n,te,W);H(se.layer),D(se.layer)})),document.getElementById("commands").onchange=function({target:e}){se.cmd=r.a[r.a.indexOf(e.value)]||r.a[0]},document.getElementById("modes").onchange=function({target:e}){if(se.drawingShape)se.mode=se.mode;else if(se.mode=e.value,o.i[se.layer])if(se.current.points.length)me();else{se.current.mode=se.mode;const e=Object(c.b)(b[se.mode])({"data-layer-id":se.layer});o.e.replaceChild(e,o.i[se.layer]),Object.keys(se.current.style).forEach(e=>{void 0===r.c.style[e]&&delete se.current.style[e]}),Object.assign(se.current.style,Object(c.f)(se.mode))}},document.getElementById("reset-transforms").onclick=function(){const{transforms:e}=r.c;o.r.checked&&se.current?se.current.transforms=Object(c.i)(e):u.transforms=Object(c.i)(e),m(),Object(c.a)(u,se),Object(c.m)(e)},document.getElementById("get-markup").onclick=function(){fe(d())},document.getElementById("get-data-uri").onclick=function(){fe(f())},document.getElementById("center-rotation-btn").onclick=function(){!function(e,t){const{x:n,y:o,width:c,height:a}=e.getBBox(),i=[Math.trunc(n+.5*c),Math.trunc(o+.5*a)];[r.b.rotate[1].value,r.b.rotate[2].value]=i,[t.rotate[1],t.rotate[2]]=i}(...se.transformLayerNotDrawing?[o.i[se.layer],se.current.transforms]:[o.o.firstElementChild,u.transforms]),Object(c.a)(u,se),m()},document.getElementById("center-vb").onclick=l,document.getElementById("add-layer").onclick=me,document.getElementById("del-layer").onclick=function(){o.i.length&&(u.layers.splice(se.layer,1),m(),o.i[se.layer].remove())},document.getElementById("clear-all").onclick=function(){window.localStorage.removeItem("drawing"),u.layers.length=0,u.outputConfig=Object.assign({},r.c.outputConfig),u.transforms=Object(c.i)(r.c.transforms),[...o.i].forEach(e=>e.remove())},document.getElementById("undo").onclick=ye,document.querySelector('a[data-tab-name="output"]').onclick=function(){o.l.innerHTML=d(),4===a.viewBox.filter(e=>0===e).length&&l()}}]);